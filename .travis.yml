---
#
# Ansible managed
#
language: python

python:
  - "3.8"

services:
  - docker

env:
  global:
    namespace="robertdebock"
  matrix:
    - image="centos" tag="7"
    - image="centos" tag="latest"
    - image="debian" tag="latest"
    - image="fedora" tag="31"
    - image="fedora" tag="latest"
    - image="opensuse" tag="latest"
    - image="ubuntu" tag="latest"
    - image="ubuntu" tag="bionic"
    - image="ubuntu" tag="xenial"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - function retry { counter=0 ; until "$@" ; do exit=$? ; counter=$(($counter + 1)) ; if [ $counter -ge 3 ] ; then return $exit ; fi ; done ; return 0; } ; retry tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack: "JVU27fv89DtgoS0It6uHjpT0NZtM5q3sQsdJviJJlgJq5O4/RbsTHv8wur4vkMIo9c5zej7vzdMLl6khEpSBIIlEq/Ai223rqvmSsAMHQxJ28tYgmSysqRPB2T7xeOXSHGbi/Is8acKirMcdFxB+u+1wkTCC0R8e39SShwmtUTEBOLpf9FfhjhTJzGD0XOM49MoBA/adeKQjny4L8yBoDHJj+tykWcD4p6TvACORVdQ8WcRAgEfpAn1tpNycquAh89gUCg8ZLdo+OsQ5c04fTJcl35RKnzAULNkcMg0hCsEiMmDEH6oFKsZsYQmSVOK4FD+scVD0oPq1iTpUkL97S7L8J3zhh7lUeENBL/Qg56lRFYr/ItMiw7WOjaH493TUHi5L5MZKMtWsHQSKIKsMFGtqaKi4MQr04+PEWT709lI7tX6USFJBslfNs/4R0KYMJo5eBkgrEw2a+B5wGhSPc0m8I0Q1XEg4zB1ig0cc0Luljsfgj27TwWiCKbmEHoq3VzuLATLB9rs/HYDM4DCCIXO+19Vfnv8PF3khPtDdWO1k1eiz7vF/6m9vMj8lG3t07Gtm5MT21tciYf9HKcETpi2zSK4zbWebg0mLROrz/jgVSQR7wwpdRlPw+/jpcCbDEpHPutCIUfKLIYNMMxbDTizJ15kp1xO5QZ5EUu5y44A="
  email: false
